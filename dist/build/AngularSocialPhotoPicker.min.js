!function(a){"use strict";a.factory("FacebookService",["SharedService",function(a){function b(a,b){d.executeRequest("/me/photo",{id:a,fields:"id,album,images,height,width,picture"},b)}function c(a,c,d){a?d(a):async.map(c,function(a,c){b(a.id,function(b,d){b||(a.originalPhoto=d.images[0],a.thumbnailUrl=d.picture),c(b,a)})},function(a){d(a,c)})}var d=new a("facebook");return{getMe:function(a){d.executeRequest("/me",{},a)},logout:function(a){d.logout(a)},getUploadedPhotos:function(a){d.executeRequest("/me/photos",{},function(b,d){c(b,d,a)})},getAlbums:function(a){d.executeRequest("/me/albums",{fields:"id,name"},a)},getAlbumPhotos:function(a,b){d.executeRequest("/me/album",{id:a},function(a,d){c(a,d,b)})},getPhoto:b}}]),a.factory("FlickrService",["SharedService",function(a){var b=new a("flickr");return{getMe:function(a){b.executeRequest("/me",{},a)},logout:function(a){b.logout(a)},getUploadedPhotos:function(a){b.executeRequest("/me/photos",{},function(b,c){b?a(b):async.map(c,function(a,b){a.originalPhoto={url:a.picture},b(null,a)},function(b){a(b,c)})})},getAlbums:function(a){b.executeRequest("/me/albums",{},a)},getAlbumPhotos:function(a,c){b.executeRequest("/me/album",{id:a},function(a,b){a?c(a):async.map(b.data,function(a,b){a.originalPhoto={url:a.picture},a.thumbnailUrl={url:a.thumbnail},b(null,a)},function(a){c(a,b.data)})})},getPhoto:function(a,c){b.executeRequest("/me/photo",{id:a},c)}}}]),a.factory("InstagramService",["SharedService",function(a){var b=new a("instagram");return{getMe:function(a){b.executeRequest("/me",{},a)},logout:function(a){b.logout(a)},getUserPhotos:function(a,c){b.executeRequest("/friend/photos",{id:a},function(a,b){a?c(a):async.map(b,function(a,b){void 0!==a.images&&void 0!==a.images.standard_resolution?(a.originalPhoto=a.images.standard_resolution,a.thumbnailUrl=a.images.thumbnail.url,b(null,a)):b("something went wrong")},function(a){c(a,b)})})},getFriends:function(a){b.executeRequest("me/following",{},a)}}}]),a.factory("PixabayService",["$http",function(a){return{getPhotos:function(b,c){a.get("https://pixabay.com/api/?username=alanmastro&key=7cc39f4a75777bba7af8&response_group=high_resolution&q="+b+"&image_type=photo").then(function(a){async.map(a.data.hits,function(a,b){a.originalPhoto={width:a.imageWidth,height:a.imageHeight,url:a.imageURL},a.thumbnailUrl=a.previewURL,b(null,a)},function(b){c(b,a.data)})},function(a){c(a)})}}}]),a.provider("socialPhotoPicker",function(){this.initSocials=function(a){hello.init({facebook:a.clientIds.facebookId||"",instagram:a.clientIds.instagramId||"",flickr:a.clientIds.flickrId||""},{scope:a.scope||"photos",redirect_uri:a.redirectUri||"redirect.html",oauth_proxy:a.oauthProxy||"https://auth-server.herokuapp.com/proxy"})},this.$get=["SocialPhotoPicker",function(a){return new socialPhotoPicker(a,initSocials)}]}),a.factory("SharedService",[function(){var a=function(a){this.provider=a};return a.prototype.executeRequest=function(a,b,c){var d=hello(this.provider);d.login({force:!1}).then(function(){d.api(a,b).then(function(a){c(null,a.data||a)},c)},c)},a.prototype.logout=function(a){hello(this.provider).logout().then(function(){a(null)},a)},a}])}(angular.module("AngularSocialPhotoPicker",[]));